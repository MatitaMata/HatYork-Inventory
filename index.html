<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Cardex - Valoración Ponderada</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background-color: #f0f0f0;
    }
    .menu-icons {
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
      padding: 50px 20px;
    }
    .menu-icons img {
      width: 150px;
      height: 150px;
      cursor: pointer;
      border-radius: 10px;
      box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }
    .menu-icons img:hover {
      transform: scale(1.05);
    }
    section {
      display: none;
      padding: 20px;
    }
    section.active {
      display: block;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 20px;
      background: white;
    }
    th, td {
      border: 1px solid #999;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #d9d9d9;
    }
    input, select {
      margin: 5px;
      padding: 5px;
    }
    button {
      padding: 10px 20px;
      margin: 10px 0;
      background-color: #007acc;
      color: white;
      border: none;
      cursor: pointer;
    }
    .t-account {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }
    .t-box {
      border: 1px solid #333;
      width: 180px;
      padding: 10px;
      background: white;
    }
    .t-box h4 {
      text-align: center;
      border-bottom: 1px solid #ccc;
      padding-bottom: 5px;
    }
    .t-box p {
      margin: 4px 0;
      font-size: 14px;
    }
    .footer-icons {
      margin-top: 50px;
      display: flex;
      justify-content: center;
      gap: 20px;
    }
    .footer-icons img {
      width: 60px;
      height: 60px;
      cursor: pointer;
    }
    h1 {
      font-size: 40px;
      text-align: center;
    }
    .info-text {
      text-align: center;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <section id="portada" class="active">
    <h1>Valoración de Inventario</h1>
    <div class="footer-icons">
      <img src="Introduccion.png" alt="Introducción" onclick="mostrar('introduccion')">
      <img src="Menu.png" alt="Menú" onclick="mostrar('menu')">
      <img src="Conclusion.png" alt="Conclusión" onclick="mostrar('conclusion')">
    </div>
  </section>

  <section id="introduccion">
    <h2 style="text-align: center;">Introducción</h2>
    <p class="info-text">Este proyecto se trata de realizar un registro de inventarios con los temas y métodos que hemos visto en clase, los temas a desarrollar son:"Registro de Operaciones", en el cual existen tres métodos: Método Analítico, Método Global y Método Perpetuo, de los cuales tenemos que escoger alguno de ellos.
Para mi trabajo, escogi el Método Perpetuo, que consiste en registrar cada movimiento de mercancía en tiempo real, permitiendo conocer en todo momento el stock disponible. El inventario permanente o perpetuo es un método para contabilizar mercancía, con el cual se lleva un seguimiento continuo de los niveles de inventario. 

      
Ventajas.                                                                                                 
Se puede conocer en cualquier momento el inventario final.                   
No es necesario cerrar el negocio para determinar el inventario final.   
      

Desventajas.
Requieres de más tiempo y análisis.    
Necesita de recursos tecnológicos.

      
Y "Valoración de Inventarios", teniendo como opciones: PEPS, UEPS y Valoración Ponderada, de los cuales el elegido es la Valoración Ponderada.
Consiste en asignar un costo uniforme a las unidades de mercancía cuando estas son adquiridas en diferentes fechas y con distintos precios. Este método calcula un costo promedio por unidad después de cada entrada de mercancía, y ese promedio es el que se utiliza para valorar las salidas de inventario, ya sea por venta, devolución o consumo interno. Este procedimiento se basa en la fórmula del promedio ponderado, que consiste en dividir el costo total acumulado de las existencias disponibles entre la cantidad total de unidades

      
Ventajas.                                                                                                
Suaviza la variabilidad de precios.          
      

Desventajas.
No refleja precios actuales si hay inflación o deflación.
</p>
    <div class="footer-icons">
      <img src="Portada.png" alt="Portada" onclick="mostrar('portada')">
      <img src="Menu.png" alt="Menú" onclick="mostrar('menu')">
      <img src="Conclusion.png" alt="Conclusión" onclick="mostrar('conclusion')">
    </div>
  </section>

  <section id="conclusion">
    <h2 style="text-align: center;">Conclusión</h2>
    <p class="info-text">La implementación de métodos adecuados de control de inventarios permite a mi empresa creada HatYork tener una mejor distribución de sus ventas a lo largo del tiempo. De igual forma, ayuda a tomar decisiones acertadas sobre producción, compras y ventas, basadas en datos reales y actualizados.
El método perpetuo ofrece una visión clara y en tiempo real del inventario, lo que facilita detectar necesidades de reabastecimiento y controlar las salidas de mercancía. Por su parte, la valoración ponderada permite calcular de forma justa el costo unitario promedio, evitando alteraciones drásticas por cambios de precio entre compras.

      
Ambos métodos, ofrecen ventajas importantes: mayor precisión contable, automatización de cálculos, reducción de errores manuales y ahorro de tiempo administrativo. 
En conjunto, estas herramientas fortalecen la eficiencia operativa de la empresa y aumentan su rentabilidad.
</p>
    <div class="footer-icons">
      <img src="Portada.png" alt="Portada" onclick="mostrar('portada')">
      <img src="Introduccion.png" alt="Introducción" onclick="mostrar('introduccion')">
      <img src="Menu.png" alt="Menú" onclick="mostrar('menu')">
    </div>
  </section>

  <section id="menu">
    <h1>Valoración de Inventario</h1>
    <div class="menu-icons">
      <img src="AgregarOperacion.png" alt="Ingresar Operación" onclick="mostrar('operacion')">
      <img src="ValoracionPonderada.png" alt="Valoración" onclick="mostrar('valoracion')">
      <img src="RegistroOperaciones.png" alt="Registro" onclick="mostrar('registro')">
      <img src="StockMercancia.png" alt="Stock" onclick="mostrar('stock')">
      <img src="UtilidadBruta.png" alt="Utilidad" onclick="mostrar('utilidad')">
    </div>
    <div class="footer-icons">
      <img src="Portada.png" alt="Portada" onclick="mostrar('portada')">
      <img src="Introduccion.png" alt="Introducción" onclick="mostrar('introduccion')">
      <img src="Conclusion.png" alt="Conclusión" onclick="mostrar('conclusion')">
    </div>
  </section>

  <section id="operacion">
    <h2>Ingresar Operación</h2>
    <form id="form">
      <input type="text" id="fecha" placeholder="Fecha">
      <select id="tipo">
        <option>Inventario inicial</option>
        <option>Compra</option>
        <option>Venta</option>
        <option>Devolución sobre venta</option>
        <option>Devolución sobre compra</option>
      </select>
      <input type="text" id="descripcion" placeholder="Descripción">
      <input type="number" id="cantidad" placeholder="Cantidad">
      <input type="number" id="precio" placeholder="Precio Unitario">
      <button type="submit">Agregar</button>
    </form>
    <div class="footer-icons">
      <img src="Menu.png" alt="Menú" onclick="mostrar('menu')">
    </div>
  </section>

  <section id="valoracion">
    <h2>Tabla de Valoración Ponderada</h2>
    <table id="tabla">
      <thead>
        <tr>
          <th>Fecha</th><th>Tipo</th><th>Descripción</th><th>Cantidad</th><th>C.U</th><th>Total</th><th>Existencias</th><th>Valor Final</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <div class="footer-icons">
      <img src="Menu.png" alt="Menú" onclick="mostrar('menu')">
    </div>
  </section>

  <section id="registro">
    <h2>Registro de Operaciones (Cuentas T)</h2>
    <div class="t-account" id="cuentasT"></div>
    <div class="footer-icons">
      <img src="Menu.png" alt="Menú" onclick="mostrar('menu')">
    </div>
  </section>

  <section id="stock">
    <h2>Stock de Mercancía</h2>
    <p id="stockInfo">No hay datos aún.</p>
    <div class="footer-icons">
      <img src="Menu.png" alt="Menú" onclick="mostrar('menu')">
    </div>
  </section>

  <section id="utilidad">
    <h2>Utilidad Bruta</h2>
    <p id="utilidadInfo">No hay datos aún.</p>
    <div class="footer-icons">
      <img src="Menu.png" alt="Menú" onclick="mostrar('menu')">
    </div>
  </section>

  <script>
  <script>
    let existencias = 0;
    let valorFinal = 0;
    let ventasTotales = 0;
    let costoDeVentas = 0;

    function mostrar(id) {
      document.querySelectorAll('section').forEach(sec => sec.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function actualizarCuentasT() {
      const cuentasDiv = document.getElementById("cuentasT");
      cuentasDiv.innerHTML = "";

      const crearCaja = (titulo, valores) => {
        const box = document.createElement("div");
        box.className = "t-box";
        box.innerHTML = `<h4>${titulo}</h4>` + valores.map(val => `<p>$${val.toFixed(2)}</p>`).join("");
        cuentasDiv.appendChild(box);
      };

      crearCaja("Ventas", [ventasTotales]);
      crearCaja("Costo de Ventas", [costoDeVentas]);
      crearCaja("Utilidad Bruta", [ventasTotales - costoDeVentas]);
    }

    document.getElementById("form").addEventListener("submit", function (e) {
      e.preventDefault();
      const fecha = document.getElementById("fecha").value;
      const tipo = document.getElementById("tipo").value;
      const descripcion = document.getElementById("descripcion").value;
      const cantidad = parseFloat(document.getElementById("cantidad").value);
      let precio = parseFloat(document.getElementById("precio").value);
      let total = precio * cantidad;

      if (tipo === "Venta" || tipo === "Devolución sobre venta") {
        precio = valorFinal / existencias;
        total = precio * cantidad;
      }

      if (tipo === "Devolución sobre compra") {
        const filas = document.querySelectorAll("#tabla tbody tr");
        if (filas.length > 0) {
          const ultimaFila = filas[filas.length - 1];
          precio = parseFloat(ultimaFila.children[4].textContent.replace("$", ""));
          total = precio * cantidad;
        }
      }

      const nuevaFila = document.createElement("tr");
      nuevaFila.innerHTML = `
        <td>${fecha}</td>
        <td>${tipo}</td>
        <td>${descripcion}</td>
        <td>${cantidad}</td>
        <td>$${precio.toFixed(2)}</td>
        <td>$${total.toFixed(2)}</td>
        <td>${existencias += tipo === "Venta" || tipo === "Devolución sobre compra" ? -cantidad : cantidad}</td>
        <td>$${valorFinal = tipo === "Venta" || tipo === "Devolución sobre compra" ? valorFinal - total : valorFinal + total, valorFinal.toFixed(2)}</td>
      `;

      document.querySelector("#tabla tbody").appendChild(nuevaFila);
      ventasTotales += tipo === "Venta" ? total : 0;
      costoDeVentas += tipo === "Venta" ? total : 0;

      document.getElementById("stockInfo").innerText = `Cantidad: ${existencias} unidades | Valor: $${valorFinal.toFixed(2)}`;
      document.getElementById("utilidadInfo").innerText = `Ventas netas: $${ventasTotales.toFixed(2)} | Costo de ventas: $${costoDeVentas.toFixed(2)} | Utilidad bruta: $${(ventasTotales - costoDeVentas).toFixed(2)}`;

      actualizarCuentasT();

      this.reset();
      document.getElementById("tipo").dispatchEvent(new Event("change"));
    });
  </script>
</body>
</html>
